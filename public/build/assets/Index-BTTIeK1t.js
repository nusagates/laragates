import{r as p,x as y,Q as m,k as g,o as l,w as x,h as e,I as f,O as S,J as k,d as r,f as A,F as h,j as _,t as o,D as d,i as L,u as C}from"./app-CsZa9FYx.js";import{A as I}from"./AdminLayout-B9id1OaC.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"system-logs-root"},V={class:"filter-bar"},w=["href"],B={class:"table-card"},q={class:"table-wrap"},D={class:"system-log-table"},N={class:"mono"},j={class:"mono event"},E={class:"desc"},O={class:"mono"},U={key:0},F={class:"pagination"},H=["innerHTML","disabled","onClick"],Q={__name:"Index",props:{logs:Object,filters:Object},setup(i){var c,v;const u=i,a=p(((c=u.filters)==null?void 0:c.source)||""),n=p(((v=u.filters)==null?void 0:v.q)||"");return y([a,n],()=>{m.get(route("system.logs"),{source:a.value||void 0,q:n.value||void 0},{preserveState:!0,replace:!0})}),(b,s)=>(l(),g(I,{title:"System Logs"},{default:x(()=>[e("div",T,[s[5]||(s[5]=e("div",{class:"header-card"},[e("h1",{class:"title"},"System Logs"),e("p",{class:"subtitle"}," Aggregated logs from system, IAM, ticket, SLA, and user behavior ")],-1)),e("div",V,[f(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t),class:"filter-select"},s[2]||(s[2]=[e("option",{value:""},"All Sources",-1),e("option",{value:"system"},"System",-1),e("option",{value:"contact"},"Contact",-1),e("option",{value:"iam"},"IAM",-1),e("option",{value:"ticket"},"Ticket",-1),e("option",{value:"sla"},"SLA",-1),e("option",{value:"behavior"},"Behavior",-1)]),512),[[S,a.value]]),f(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>n.value=t),type:"text",placeholder:"Search event or description...",class:"filter-input"},null,512),[[k,n.value]]),e("a",{href:b.route("system.logs.export",{source:a.value||void 0,q:n.value||void 0}),class:"export-btn"}," Export CSV ",8,w)]),e("div",B,[e("div",q,[e("table",D,[s[4]||(s[4]=e("thead",null,[e("tr",null,[e("th",null,"Time"),e("th",null,"Source"),e("th",null,"Event"),e("th",null,"Description"),e("th",null,"User / Role"),e("th",null,"IP")])],-1)),e("tbody",null,[(l(!0),r(h,null,_(i.logs.data,t=>(l(),r("tr",{key:t.source+"-"+t.id},[e("td",N,o(t.created_at),1),e("td",null,[e("span",{class:d(["badge","badge-"+t.source])},o(t.source),3)]),e("td",j,[L(o(t.event)+" ",1),e("span",{class:d(["severity","sev-"+t.severity])},o(t.severity),3)]),e("td",E,o(t.description??"-"),1),e("td",null,o(t.role??t.user_id??"-"),1),e("td",O,o(t.ip??"-"),1)]))),128)),i.logs.data.length===0?(l(),r("tr",U,s[3]||(s[3]=[e("td",{colspan:"6",class:"empty"}," No logs found ",-1)]))):A("",!0)])])])]),e("div",F,[(l(!0),r(h,null,_(i.logs.links,t=>(l(),r("button",{key:t.label,innerHTML:t.label,disabled:!t.url,onClick:z=>C(m).visit(t.url),class:d(["pager",{active:t.active}])},null,10,H))),128))])])]),_:1}))}},$=M(Q,[["__scopeId","data-v-44dfc8b6"]]);export{$ as default};
