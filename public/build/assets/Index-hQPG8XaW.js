import{A as D}from"./AdminLayout-BnfDst2E.js";import{a as L,r as V,x,b as d,d as k,o as b,e as o,u as n,g as h,w as a,h as i,i as y,f as u,t as C,l as G,F as $}from"./app-B0FPeIhw.js";const E={key:0},F={key:1},J={class:"d-flex align-center mb-4"},K={key:2},j={class:"d-flex justify-end mt-4"},X={__name:"Index",setup(q){const t=L().props.settings,_=V("general"),p=x({company_name:(t==null?void 0:t.company_name)??"CS WABA Demo",timezone:(t==null?void 0:t.timezone)??"Asia/Jakarta"});function U(){p.post("/settings/general")}const s=x({phone_number:(t==null?void 0:t.wa_phone_number)??"",webhook_url:(t==null?void 0:t.wa_webhook_url)??"",api_key:(t==null?void 0:t.wa_api_key)??"",status:t!=null&&t.wa_phone_number?"connected":"disconnected",show_key:!1});function S(){s.post("/settings/whatsapp")}const r=x({sound_notification:(t==null?void 0:t.notif_sound)??!0,desktop_notification:(t==null?void 0:t.notif_desktop)??!0,auto_assign_ticket:(t==null?void 0:t.auto_assign)??!1});function W(){r.post("/settings/preferences")}const g=V(!1),f=V(null);function z(){f.value=null,setTimeout(()=>{f.value={success:!0,message:"Webhook received successfully!",timestamp:new Date().toLocaleString()}},800)}return(M,e)=>{const w=d("v-tab"),P=d("v-tabs"),T=d("v-divider"),v=d("v-text-field"),m=d("v-btn"),B=d("v-chip"),c=d("v-switch"),N=d("v-card-text"),A=d("v-card"),I=d("v-alert"),R=d("v-dialog");return b(),k($,null,[o(n(h),{title:"Settings"}),o(D,null,{title:a(()=>e[13]||(e[13]=[i("Settings")])),default:a(()=>[o(A,{elevation:"2",class:"pa-0"},{default:a(()=>[o(P,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=l=>_.value=l),"bg-color":"#f5f6fa",grow:""},{default:a(()=>[o(w,{value:"general","prepend-icon":"mdi-cog"},{default:a(()=>e[14]||(e[14]=[i("General")])),_:1,__:[14]}),o(w,{value:"whatsapp","prepend-icon":"mdi-whatsapp"},{default:a(()=>e[15]||(e[15]=[i("WhatsApp API")])),_:1,__:[15]}),o(w,{value:"preferences","prepend-icon":"mdi-tune"},{default:a(()=>e[16]||(e[16]=[i("Preferences")])),_:1,__:[16]})]),_:1},8,["modelValue"]),o(T),o(N,{class:"pa-6"},{default:a(()=>[_.value==="general"?(b(),k("div",E,[e[18]||(e[18]=u("h3",{class:"text-h6 mb-4 font-weight-bold"},"General Settings",-1)),o(v,{modelValue:n(p).company_name,"onUpdate:modelValue":e[1]||(e[1]=l=>n(p).company_name=l),label:"Company Name",class:"mb-3"},null,8,["modelValue"]),o(v,{modelValue:n(p).timezone,"onUpdate:modelValue":e[2]||(e[2]=l=>n(p).timezone=l),label:"Timezone",placeholder:"Asia/Jakarta",class:"mb-3"},null,8,["modelValue"]),o(m,{color:"primary",class:"mt-4",loading:n(p).processing,onClick:U},{default:a(()=>e[17]||(e[17]=[i(" Save Changes ")])),_:1,__:[17]},8,["loading"])])):y("",!0),_.value==="whatsapp"?(b(),k("div",F,[e[22]||(e[22]=u("h3",{class:"text-h6 mb-4 font-weight-bold"},"WhatsApp Business API",-1)),o(v,{modelValue:n(s).phone_number,"onUpdate:modelValue":e[3]||(e[3]=l=>n(s).phone_number=l),label:"Connected Phone Number",class:"mb-3"},null,8,["modelValue"]),o(v,{modelValue:n(s).webhook_url,"onUpdate:modelValue":e[4]||(e[4]=l=>n(s).webhook_url=l),label:"Webhook URL",class:"mb-3",readonly:""},null,8,["modelValue"]),o(v,{modelValue:n(s).api_key,"onUpdate:modelValue":e[5]||(e[5]=l=>n(s).api_key=l),type:n(s).show_key?"text":"password",label:"API Key",class:"mb-3","prepend-inner-icon":"mdi-key-outline","append-inner-icon":n(s).show_key?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[6]||(e[6]=l=>n(s).show_key=!n(s).show_key)},null,8,["modelValue","type","append-inner-icon"]),u("div",J,[o(B,{color:n(s).status==="connected"?"green":"red",dark:"",size:"small"},{default:a(()=>[i(C(n(s).status==="connected"?"Connected":"Disconnected"),1)]),_:1},8,["color"]),o(m,{class:"ms-3",variant:"outlined",size:"small"},{default:a(()=>e[19]||(e[19]=[i("Reconnect")])),_:1,__:[19]}),o(m,{class:"ms-3",variant:"text",size:"small",color:"primary",onClick:e[7]||(e[7]=l=>g.value=!0)},{default:a(()=>e[20]||(e[20]=[i(" Test Webhook ")])),_:1,__:[20]})]),e[23]||(e[23]=u("p",{class:"text-caption text-grey-darken-1"}," Pastikan webhook URL di atas sudah dipasang di provider WhatsApp Anda. ",-1)),o(m,{color:"primary",class:"mt-4",loading:n(s).processing,onClick:S},{default:a(()=>e[21]||(e[21]=[i(" Save Changes ")])),_:1,__:[21]},8,["loading"])])):y("",!0),_.value==="preferences"?(b(),k("div",K,[e[25]||(e[25]=u("h3",{class:"text-h6 mb-4 font-weight-bold"},"Preferences",-1)),o(c,{modelValue:n(r).sound_notification,"onUpdate:modelValue":e[8]||(e[8]=l=>n(r).sound_notification=l),label:"Enable sound notification for new messages"},null,8,["modelValue"]),o(c,{modelValue:n(r).desktop_notification,"onUpdate:modelValue":e[9]||(e[9]=l=>n(r).desktop_notification=l),label:"Show desktop notification for new chats"},null,8,["modelValue"]),o(c,{modelValue:n(r).auto_assign_ticket,"onUpdate:modelValue":e[10]||(e[10]=l=>n(r).auto_assign_ticket=l),label:"Auto-assign new tickets to available agents"},null,8,["modelValue"]),o(m,{color:"primary",class:"mt-4",loading:n(r).processing,onClick:W},{default:a(()=>e[24]||(e[24]=[i(" Save Changes ")])),_:1,__:[24]},8,["loading"])])):y("",!0)]),_:1})]),_:1}),o(R,{modelValue:g.value,"onUpdate:modelValue":e[12]||(e[12]=l=>g.value=l),width:"450"},{default:a(()=>[o(A,{class:"pa-4"},{default:a(()=>[e[29]||(e[29]=u("h3",{class:"text-h6 mb-3 font-weight-bold"},"Test Webhook",-1)),e[30]||(e[30]=u("p",{class:"text-body-2 text-grey-darken-1 mb-3"}," Klik tombol di bawah untuk mengirim simulasi payload webhook. ",-1)),o(m,{color:"primary",onClick:z,class:"mb-3"},{default:a(()=>e[26]||(e[26]=[i("Send Test Request")])),_:1,__:[26]}),f.value?(b(),G(I,{key:0,type:"success",class:"mt-3",border:"start",prominent:""},{default:a(()=>[i(C(f.value.message)+" ",1),e[27]||(e[27]=u("br",null,null,-1)),u("small",null,C(f.value.timestamp),1)]),_:1,__:[27]})):y("",!0),u("div",j,[o(m,{variant:"text",onClick:e[11]||(e[11]=l=>g.value=!1)},{default:a(()=>e[28]||(e[28]=[i("Close")])),_:1,__:[28]})])]),_:1,__:[29,30]})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{X as default};
