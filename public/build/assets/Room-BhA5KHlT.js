import{r as i,q as g,n as w,b as v,d as o,o as a,F as k,j as b,m as I,s as B,e as d,w as u,f as l,t as r}from"./app-B0FPeIhw.js";const C={key:0,class:"d-flex"},M={class:"text-body-2"},N={class:"text-grey text-caption"},S={key:1,class:"d-flex justify-end"},j={class:"text-body-2"},E={class:"text-grey text-caption"},R={__name:"Room",props:{roomId:Number},setup(h){const s=h,c=i([]);i(!1);const n=i(null);async function m(){if(!s.roomId)return;const e=await I.get(`/api/chats/${s.roomId}`);c.value=e.data.messages,x()}function _(){s.roomId&&window.Echo.private(`chat.${s.roomId}`).listen("MessageSent",e=>{c.value.push({id:e.id,sender:e.sender,text:e.text,time:e.time,is_me:e.is_me}),x()})}function x(){B(()=>{n.value&&(n.value.scrollTop=n.value.scrollHeight)})}return g(()=>s.roomId,()=>{m(),_()}),w(()=>{m(),_()}),(e,f)=>{const y=v("v-avatar"),p=v("v-sheet");return a(),o("div",{ref_key:"messageBox",ref:n,style:{"max-height":"calc(100vh - 230px)","overflow-y":"auto"}},[(a(!0),o(k,null,b(c.value,t=>(a(),o("div",{key:t.id,class:"mb-2"},[t.sender==="customer"?(a(),o("div",C,[d(y,{color:"blue",size:"26",class:"me-2"},{default:u(()=>f[0]||(f[0]=[l("span",{class:"white--text"},"C",-1)])),_:1,__:[0]}),d(p,{class:"pa-2 px-3",color:"#e9f1ff",rounded:"",style:{"max-width":"70%"}},{default:u(()=>[l("div",M,r(t.text),1),l("small",N,r(t.time),1)]),_:2},1024)])):(a(),o("div",S,[d(p,{class:"pa-2 px-3 d-flex flex-column",color:"#dcf8c6",rounded:"",style:{"max-width":"70%"}},{default:u(()=>[l("div",j,r(t.text),1),l("small",E,r(t.time),1)]),_:2},1024)]))]))),128))],512)}}};export{R as default};
