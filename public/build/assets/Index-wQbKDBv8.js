import{A as X}from"./AdminLayout-BnfDst2E.js";import{a as Y,c as S,r as f,x as Z,b as r,d as U,o as N,e as l,u as d,g as h,w as n,f as o,h as a,t as m,i as ee,F as R,j as le,Q as T}from"./app-B0FPeIhw.js";const te={key:0},ne={class:"d-flex align-center"},oe={class:"d-flex justify-end gap-2"},ae={class:"d-flex justify-end gap-2"},se={class:"text-body-2 mb-4"},ue={class:"d-flex justify-center gap-2"},de={class:"mb-1"},ve={__name:"Index",setup(re){const $=Y(),E=S(()=>$.props.agents||[]),k=S(()=>$.props.counts||{}),L=S(()=>$.props.filters||{status:"all"}),C=f(L.value.status??"all");function O(u){T.get("/agents",{status:u},{preserveState:!0,replace:!0})}const g=f(!1),_=f(!1),V=f(!1),w=f(!1),v=f(null),b=f({email:"",password:""}),s=Z({name:"",email:"",role:"Agent"});function Q(){v.value=null,s.reset(),s.role="Agent",g.value=!0}function I(u){v.value=u,s.name=u.name,s.email=u.email,s.role=u.role,_.value=!0}function K(u){v.value=u,V.value=!0}function j(){if(!v.value){s.post("/agents",{preserveState:!0,onSuccess:u=>{g.value=!1;const e=u.props.flash||{};e.newAgent&&(b.value=e.newAgent,w.value=!0)}});return}s.put(`/agents/${v.value.id}`,{preserveState:!0,onSuccess:()=>{_.value=!1}})}function M(){T.delete(`/agents/${v.value.id}`,{preserveState:!0,onSuccess:()=>{V.value=!1}})}const q=u=>u==="online"?"green":u==="offline"?"grey":"orange",z=S(()=>C.value==="all"?E.value:E.value.filter(u=>u.status===C.value));return(u,e)=>{const F=r("v-col"),i=r("v-btn"),G=r("v-row"),p=r("v-chip"),H=r("v-chip-group"),D=r("v-divider"),J=r("v-avatar"),y=r("v-icon"),W=r("v-table"),x=r("v-card"),A=r("v-text-field"),B=r("v-select"),c=r("v-dialog");return N(),U(R,null,[l(d(h),{title:"Agents"}),l(X,null,{title:n(()=>e[17]||(e[17]=[a("Agents")])),default:n(()=>[l(x,{elevation:"2",class:"pa-4"},{default:n(()=>[l(G,{align:"center",class:"mb-4"},{default:n(()=>[l(F,null,{default:n(()=>e[18]||(e[18]=[o("h3",{class:"text-h6 font-weight-bold"},"Agents Management",-1),o("p",{class:"text-body-2 text-grey-darken-1"}," Kelola daftar agent yang bertanggung jawab menangani pesan pelanggan. ",-1)])),_:1,__:[18]}),l(F,{cols:"auto"},{default:n(()=>[l(i,{color:"primary","prepend-icon":"mdi-account-plus",onClick:Q},{default:n(()=>e[19]||(e[19]=[a(" Add Agent ")])),_:1,__:[19]})]),_:1})]),_:1}),l(H,{modelValue:C.value,"onUpdate:modelValue":[e[0]||(e[0]=t=>C.value=t),O],mandatory:""},{default:n(()=>[l(p,{value:"all",filter:""},{default:n(()=>[a("All ("+m(k.value.all)+")",1)]),_:1}),l(p,{value:"online",filter:"",color:"green"},{default:n(()=>[a("Online ("+m(k.value.online)+")",1)]),_:1}),l(p,{value:"offline",filter:"",color:"grey"},{default:n(()=>[a("Offline ("+m(k.value.offline)+")",1)]),_:1}),l(p,{value:"pending",filter:"",color:"orange"},{default:n(()=>[a("Pending ("+m(k.value.pending)+")",1)]),_:1})]),_:1},8,["modelValue"]),l(D,{class:"my-4"}),l(W,{density:"comfortable",hover:""},{default:n(()=>[e[23]||(e[23]=o("thead",null,[o("tr",null,[o("th",null,"Name"),o("th",null,"Email"),o("th",null,"Role"),o("th",null,"Status"),o("th",null,"Action")])],-1)),o("tbody",null,[z.value.length?ee("",!0):(N(),U("tr",te,e[20]||(e[20]=[o("td",{colspan:"5",class:"text-center py-6"},"No agents found",-1)]))),(N(!0),U(R,null,le(z.value,t=>(N(),U("tr",{key:t.id},[o("td",null,[o("div",ne,[l(J,{color:"blue",size:"32",class:"mr-2"},{default:n(()=>[a(m(t.name.charAt(0)),1)]),_:2},1024),a(" "+m(t.name),1)])]),o("td",null,m(t.email),1),o("td",null,[l(p,{size:"small"},{default:n(()=>[a(m(t.role),1)]),_:2},1024)]),o("td",null,[l(p,{color:q(t.status),dark:"",size:"small"},{default:n(()=>[a(m(t.status),1)]),_:2},1032,["color"])]),o("td",null,[l(i,{icon:"",variant:"text",color:"primary",onClick:P=>I(t)},{default:n(()=>[l(y,null,{default:n(()=>e[21]||(e[21]=[a("mdi-pencil")])),_:1,__:[21]})]),_:2},1032,["onClick"]),l(i,{icon:"",variant:"text",color:"red",onClick:P=>K(t)},{default:n(()=>[l(y,null,{default:n(()=>e[22]||(e[22]=[a("mdi-delete")])),_:1,__:[22]})]),_:2},1032,["onClick"])])]))),128))])]),_:1,__:[23]})]),_:1}),l(c,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=t=>g.value=t),width:"450"},{default:n(()=>[l(x,{class:"pa-4"},{default:n(()=>[e[26]||(e[26]=o("h3",{class:"text-h6 mb-4"},"Add New Agent",-1)),l(A,{modelValue:d(s).name,"onUpdate:modelValue":e[1]||(e[1]=t=>d(s).name=t),label:"Full Name"},null,8,["modelValue"]),l(A,{modelValue:d(s).email,"onUpdate:modelValue":e[2]||(e[2]=t=>d(s).email=t),label:"Email",class:"mt-3"},null,8,["modelValue"]),l(B,{modelValue:d(s).role,"onUpdate:modelValue":e[3]||(e[3]=t=>d(s).role=t),class:"mt-3",items:["Admin","Supervisor","Agent"],label:"Role"},null,8,["modelValue"]),l(D,{class:"my-4"}),o("div",oe,[l(i,{variant:"text",onClick:e[4]||(e[4]=t=>g.value=!1)},{default:n(()=>e[24]||(e[24]=[a("Cancel")])),_:1,__:[24]}),l(i,{color:"primary",onClick:j,loading:d(s).processing},{default:n(()=>e[25]||(e[25]=[a(" Save ")])),_:1,__:[25]},8,["loading"])])]),_:1,__:[26]})]),_:1},8,["modelValue"]),l(c,{modelValue:_.value,"onUpdate:modelValue":e[10]||(e[10]=t=>_.value=t),width:"450"},{default:n(()=>[l(x,{class:"pa-4"},{default:n(()=>[e[29]||(e[29]=o("h3",{class:"text-h6 mb-4"},"Edit Agent",-1)),l(A,{modelValue:d(s).name,"onUpdate:modelValue":e[6]||(e[6]=t=>d(s).name=t),label:"Full Name"},null,8,["modelValue"]),l(A,{modelValue:d(s).email,"onUpdate:modelValue":e[7]||(e[7]=t=>d(s).email=t),class:"mt-3",label:"Email"},null,8,["modelValue"]),l(B,{modelValue:d(s).role,"onUpdate:modelValue":e[8]||(e[8]=t=>d(s).role=t),class:"mt-3",items:["Admin","Supervisor","Agent"],label:"Role"},null,8,["modelValue"]),l(D,{class:"my-4"}),o("div",ae,[l(i,{variant:"text",onClick:e[9]||(e[9]=t=>_.value=!1)},{default:n(()=>e[27]||(e[27]=[a("Cancel")])),_:1,__:[27]}),l(i,{color:"primary",onClick:j,loading:d(s).processing},{default:n(()=>e[28]||(e[28]=[a(" Update ")])),_:1,__:[28]},8,["loading"])])]),_:1,__:[29]})]),_:1},8,["modelValue"]),l(c,{modelValue:V.value,"onUpdate:modelValue":e[12]||(e[12]=t=>V.value=t),width:"400"},{default:n(()=>[l(x,{class:"pa-4 text-center"},{default:n(()=>{var t;return[l(y,{size:"48",color:"red",class:"mb-2"},{default:n(()=>e[30]||(e[30]=[a("mdi-alert-circle")])),_:1,__:[30]}),e[35]||(e[35]=o("h3",{class:"text-h6 mb-2"},"Delete Agent?",-1)),o("p",se,[e[31]||(e[31]=a(" Are you sure want to delete ")),o("strong",null,m((t=v.value)==null?void 0:t.name),1),e[32]||(e[32]=a("? "))]),o("div",ue,[l(i,{variant:"text",onClick:e[11]||(e[11]=P=>V.value=!1)},{default:n(()=>e[33]||(e[33]=[a("Cancel")])),_:1,__:[33]}),l(i,{color:"red",onClick:M},{default:n(()=>e[34]||(e[34]=[a("Delete")])),_:1,__:[34]})])]}),_:1,__:[35]})]),_:1},8,["modelValue"]),l(c,{modelValue:w.value,"onUpdate:modelValue":e[16]||(e[16]=t=>w.value=t),width:"420"},{default:n(()=>[l(x,{class:"pa-4 text-center"},{default:n(()=>[l(y,{size:"48",color:"green",class:"mb-2"},{default:n(()=>e[36]||(e[36]=[a("mdi-check-circle")])),_:1,__:[36]}),e[41]||(e[41]=o("h3",{class:"text-h6 mb-2"},"Agent Created Successfully!",-1)),o("p",de,[e[37]||(e[37]=o("strong",null,"Email:",-1)),a(" "+m(b.value.email),1)]),l(A,{modelValue:b.value.password,"onUpdate:modelValue":e[13]||(e[13]=t=>b.value.password=t),label:"Temporary Password",type:"text",readonly:"",density:"comfortable",variant:"outlined",class:"mb-3","prepend-inner-icon":"mdi-lock"},null,8,["modelValue"]),l(i,{color:"primary",block:"",class:"mb-3",onClick:e[14]||(e[14]=t=>u.navigator.clipboard.writeText(b.value.password))},{default:n(()=>[l(y,{left:""},{default:n(()=>e[38]||(e[38]=[a("mdi-content-copy")])),_:1,__:[38]}),e[39]||(e[39]=a(" Copy Password "))]),_:1,__:[39]}),l(i,{variant:"text",block:"",onClick:e[15]||(e[15]=t=>w.value=!1)},{default:n(()=>e[40]||(e[40]=[a(" Close ")])),_:1,__:[40]})]),_:1,__:[41]})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{ve as default};
