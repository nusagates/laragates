import{r as v,b as o,k as C,o as N,w as u,e as l,h as p,i as g,t as O,l as U}from"./app-CsZa9FYx.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"text-muted mb-3"},I={class:"d-flex justify-end gap-3 mt-5"},T={__name:"SendPreviewModal",props:{modelValue:Boolean,template:Object},emits:["update:modelValue"],setup(V,{emit:x}){const d=V,b=x,a=v({phone:"",language:"id",components:[]}),i=v(!1),c=v({});function _(){b("update:modelValue",!1)}function w(n){var e;return((e=c.value[n])==null?void 0:e[0])||""}async function y(){var n,e,r;i.value=!0,c.value={};try{const t=await U.post(route("templates.send-preview",d.template.id),{phone:a.value.phone,language:a.value.language,components:a.value.components});alert(`Preview sent (SIMULATION OK):
`+t.data.message),_()}catch(t){((n=t.response)==null?void 0:n.status)===422?c.value=t.response.data.errors:alert("Send failed: "+(((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||t.message))}finally{i.value=!1}}return(n,e)=>{const r=o("v-text-field"),t=o("v-select"),S=o("v-textarea"),f=o("v-btn"),k=o("v-card"),P=o("v-dialog");return N(),C(P,{modelValue:d.modelValue,"onUpdate:modelValue":e[3]||(e[3]=m=>d.modelValue=m),"max-width":"500",theme:"dark"},{default:u(()=>[l(k,{class:"pa-5 dark-dialog-card"},{default:u(()=>{var m;return[e[7]||(e[7]=p("h3",{class:"text-h6 mb-2"}," Send Preview ",-1)),p("p",M,[e[4]||(e[4]=g(" Template: ")),p("strong",null,O((m=d.template)==null?void 0:m.name),1)]),l(r,{modelValue:a.value.phone,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.phone=s),label:"Phone (e.g. 628123...)",density:"compact",class:"mb-3","error-messages":w("phone")},null,8,["modelValue","error-messages"]),l(t,{modelValue:a.value.language,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.language=s),items:["id","en"],label:"Language",density:"compact",class:"mb-3"},null,8,["modelValue"]),l(S,{modelValue:a.value.components,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.components=s),label:"Optional components JSON",placeholder:'[{"type":"body","parameters":[{"type":"text","text":"Hello"}]}]',"auto-grow":"",class:"mb-2"},null,8,["modelValue"]),p("div",I,[l(f,{variant:"text",onClick:_},{default:u(()=>e[5]||(e[5]=[g(" Cancel ")])),_:1,__:[5]}),l(f,{color:"primary",loading:i.value,onClick:y},{default:u(()=>e[6]||(e[6]=[g(" Send ")])),_:1,__:[6]},8,["loading"])])]}),_:1,__:[7]})]),_:1},8,["modelValue"])}}},L=B(T,[["__scopeId","data-v-928c54a6"]]);export{L as default};
