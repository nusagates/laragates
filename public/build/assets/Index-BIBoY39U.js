import{a as F,c as N,r as D,b as o,d as u,o as c,e as s,u as y,g as A,w as n,h as e,H as I,i as _,f as L,F as b,j as T,t as r,S as U,Q as S}from"./app-CsZa9FYx.js";import{A as j}from"./AdminLayout-B9id1OaC.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"report-dark"},R={class:"filters"},z={class:"muted text-caption"},E={class:"text-center"},H={class:"text-center"},P={class:"text-center danger"},q={class:"text-right"},G={key:0},J={class:"d-flex justify-end mt-4"},M={__name:"Index",setup(O){var v,f;const i=F(),d=N(()=>i.props.campaigns??{data:[],current_page:1,last_page:1}),l=D({search:((v=i.props.filters)==null?void 0:v.search)??"",status:((f=i.props.filters)==null?void 0:f.status)??""});function m(){S.get(route("broadcast.reports"),{search:l.value.search||void 0,status:l.value.status||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})}function V(p){S.get(route("broadcast.reports"),{page:p,search:l.value.search||void 0,status:l.value.status||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})}return(p,t)=>{const k=o("v-text-field"),w=o("v-select"),g=o("v-btn"),h=o("v-card"),B=o("v-table"),C=o("v-pagination");return c(),u(b,null,[s(y(A),{title:"Broadcast Report"}),s(j,null,{title:n(()=>t[2]||(t[2]=[_("Broadcast Report")])),default:n(()=>[e("div",Q,[s(h,{class:"card pa-4 mb-4"},{default:n(()=>[e("div",R,[s(k,{modelValue:l.value.search,"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.search=a),placeholder:"Search campaign name...",density:"compact","hide-details":"",clearable:"",onKeyup:I(m,["enter"])},null,8,["modelValue"]),s(w,{modelValue:l.value.status,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.status=a),items:["draft","pending_approval","approved","scheduled","running","done","failed"],placeholder:"Status",clearable:"",density:"compact","hide-details":""},null,8,["modelValue"]),s(g,{color:"primary",onClick:m},{default:n(()=>t[3]||(t[3]=[_(" Filter ")])),_:1,__:[3]})])]),_:1}),s(h,{class:"card pa-0"},{default:n(()=>[s(B,null,{default:n(()=>[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",null,"Campaign"),e("th",null,"Template"),e("th",{class:"text-center"},"Targets"),e("th",{class:"text-center"},"Sent"),e("th",{class:"text-center"},"Failed"),e("th",null,"Date"),e("th",{class:"text-right"},"Action")])],-1)),e("tbody",null,[(c(!0),u(b,null,T(d.value.data,a=>{var x;return c(),u("tr",{key:a.id,class:"row-hover"},[e("td",null,[e("strong",null,r(a.name),1),e("div",z," by "+r(a.created_by??"-"),1)]),e("td",null,r(((x=a.template)==null?void 0:x.name)??"-"),1),e("td",E,r(a.targets_count??0),1),e("td",H,r(a.sent_count??0),1),e("td",P,r(a.failed_count??0),1),e("td",null,r(new Date(a.created_at).toLocaleString()),1),e("td",q,[s(y(U),{href:p.route("broadcast.report.show",a.id)},{default:n(()=>[s(g,{size:"small",variant:"tonal",color:"primary"},{default:n(()=>t[4]||(t[4]=[_(" Detail ")])),_:1,__:[4]})]),_:2},1032,["href"])])])}),128)),d.value.data.length===0?(c(),u("tr",G,t[5]||(t[5]=[e("td",{colspan:"7",class:"text-center muted pa-6"}," No campaigns found. ",-1)]))):L("",!0)])]),_:1,__:[6]})]),_:1}),e("div",J,[s(C,{"model-value":d.value.current_page,length:d.value.last_page,"onUpdate:modelValue":V},null,8,["model-value","length"])])])]),_:1})],64)}}},Z=K(M,[["__scopeId","data-v-6a4777f9"]]);export{Z as default};
