import{A as K}from"./AdminLayout-BSfQMc_f.js";import{r,n as Y,b as d,d as w,o as k,e as t,u as I,g as q,w as a,f as o,h as s,i as G,F as L,j as H,t as v,m as _}from"./app-XQ9sXrzo.js";const J={key:0},O={class:"d-flex justify-end mt-4 gap-2"},Q={class:"d-flex justify-end mt-4 gap-2"},R={style:{background:"white",padding:"12px 16px","border-radius":"12px",display:"inline-block"}},X={class:"d-flex justify-end mt-4"},le={__name:"Index",setup(Z){const C=r([]),p=r(!1),f=r(!1),y=r(!1),m=r(!1),g=r(null),n=r({name:"",category:"",language:"",body:""});async function b(){p.value=!0;try{const u=await _.get("/templates/list");C.value=u.data}catch(u){console.error(u)}p.value=!1}async function M(){p.value=!0;try{await _.post("/templates/sync"),await b()}catch(u){console.error(u)}p.value=!1}async function U(){try{m.value&&g.value?await _.put(`/templates/${g.value.id}`,n.value):await _.post("/templates",n.value),f.value=!1,m.value=!1,await b()}catch(u){console.error(u)}}async function B(u){if(confirm("Delete this template?"))try{await _.delete(`/templates/${u}`),await b()}catch(e){console.error(e)}}const j=u=>u==="approved"?"green":u==="pending"?"orange":"red";function S(u){g.value=u,y.value=!0}function z(u){g.value=u,n.value={...u},m.value=!0}return Y(b),(u,e)=>{const N=d("v-col"),i=d("v-btn"),P=d("v-row"),W=d("v-chip"),c=d("v-icon"),D=d("v-table"),V=d("v-card"),A=d("v-text-field"),x=d("v-select"),E=d("v-textarea"),T=d("v-dialog"),F=d("v-sheet");return k(),w(L,null,[t(I(q),{title:"Templates"}),t(K,null,{title:a(()=>e[15]||(e[15]=[s("Templates")])),default:a(()=>[t(V,{elevation:"2",class:"pa-4"},{default:a(()=>[t(P,{class:"mb-4",align:"center"},{default:a(()=>[t(N,null,{default:a(()=>e[16]||(e[16]=[o("h3",{class:"text-h6 font-weight-bold"},"WhatsApp Message Templates",-1),o("p",{class:"text-body-2 text-grey-darken-1"}," Kelola template pesan resmi yang disetujui oleh WhatsApp. ",-1)])),_:1,__:[16]}),t(N,{cols:"auto",class:"d-flex gap-2"},{default:a(()=>[t(i,{loading:p.value,variant:"outlined","prepend-icon":"mdi-refresh",onClick:M},{default:a(()=>e[17]||(e[17]=[s("SYNC")])),_:1,__:[17]},8,["loading"]),t(i,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=l=>f.value=!0)},{default:a(()=>e[18]||(e[18]=[s("NEW TEMPLATE")])),_:1,__:[18]})]),_:1})]),_:1}),t(D,{density:"comfortable",hover:""},{default:a(()=>[e[23]||(e[23]=o("thead",null,[o("tr",null,[o("th",null,"Name"),o("th",null,"Category"),o("th",null,"Language"),o("th",null,"Status"),o("th",null,"Last Updated"),o("th",null,"Action")])],-1)),o("tbody",null,[(k(!0),w(L,null,H(C.value,l=>(k(),w("tr",{key:l.id},[o("td",null,v(l.name),1),o("td",null,v(l.category),1),o("td",null,v(l.language),1),o("td",null,[t(W,{color:j(l.status),size:"small",dark:""},{default:a(()=>[s(v(l.status),1)]),_:2},1032,["color"])]),o("td",null,v(l.updated_at),1),o("td",null,[t(i,{icon:"",size:"small",onClick:$=>S(l)},{default:a(()=>[t(c,null,{default:a(()=>e[19]||(e[19]=[s("mdi-eye")])),_:1,__:[19]})]),_:2},1032,["onClick"]),t(i,{icon:"",size:"small",onClick:$=>z(l)},{default:a(()=>[t(c,null,{default:a(()=>e[20]||(e[20]=[s("mdi-pencil")])),_:1,__:[20]})]),_:2},1032,["onClick"]),t(i,{icon:"",size:"small",color:"red",onClick:$=>B(l.id)},{default:a(()=>[t(c,null,{default:a(()=>e[21]||(e[21]=[s("mdi-delete")])),_:1,__:[21]})]),_:2},1032,["onClick"])])]))),128)),C.value.length===0?(k(),w("tr",J,e[22]||(e[22]=[o("td",{colspan:"6",class:"text-center pa-4"},[s(" Belum ada template. Klik "),o("b",null,"SYNC"),s(" atau "),o("b",null,"NEW TEMPLATE.")],-1)]))):G("",!0)])]),_:1,__:[23]})]),_:1}),t(T,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=l=>f.value=l),width:"520"},{default:a(()=>[t(V,{class:"pa-4"},{default:a(()=>[e[26]||(e[26]=o("h3",{class:"text-h6 mb-4 font-weight-bold"},"Add New Template",-1)),t(A,{modelValue:n.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value.name=l),label:"Template Name",class:"mb-3"},null,8,["modelValue"]),t(x,{modelValue:n.value.category,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.category=l),items:["Utility","Marketing","Authentication"],label:"Category",class:"mb-3"},null,8,["modelValue"]),t(x,{modelValue:n.value.language,"onUpdate:modelValue":e[3]||(e[3]=l=>n.value.language=l),items:["id","en"],label:"Language",class:"mb-3"},null,8,["modelValue"]),t(E,{modelValue:n.value.body,"onUpdate:modelValue":e[4]||(e[4]=l=>n.value.body=l),label:"Body Message",rows:"4",variant:"outlined"},null,8,["modelValue"]),o("div",O,[t(i,{variant:"text",onClick:e[5]||(e[5]=l=>f.value=!1)},{default:a(()=>e[24]||(e[24]=[s("Cancel")])),_:1,__:[24]}),t(i,{color:"primary",onClick:U},{default:a(()=>e[25]||(e[25]=[s("Save")])),_:1,__:[25]})])]),_:1,__:[26]})]),_:1},8,["modelValue"]),t(T,{modelValue:m.value,"onUpdate:modelValue":e[12]||(e[12]=l=>m.value=l),width:"520"},{default:a(()=>[t(V,{class:"pa-4"},{default:a(()=>[e[29]||(e[29]=o("h3",{class:"text-h6 mb-4 font-weight-bold"},"Edit Template",-1)),t(A,{modelValue:n.value.name,"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.name=l),label:"Template Name",class:"mb-3"},null,8,["modelValue"]),t(x,{modelValue:n.value.category,"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.category=l),items:["Utility","Marketing","Authentication"],label:"Category",class:"mb-3"},null,8,["modelValue"]),t(x,{modelValue:n.value.language,"onUpdate:modelValue":e[9]||(e[9]=l=>n.value.language=l),items:["id","en"],label:"Language",class:"mb-3"},null,8,["modelValue"]),t(E,{modelValue:n.value.body,"onUpdate:modelValue":e[10]||(e[10]=l=>n.value.body=l),label:"Body Message",rows:"4",variant:"outlined"},null,8,["modelValue"]),o("div",Q,[t(i,{variant:"text",onClick:e[11]||(e[11]=l=>m.value=!1)},{default:a(()=>e[27]||(e[27]=[s("Cancel")])),_:1,__:[27]}),t(i,{color:"primary",onClick:U},{default:a(()=>e[28]||(e[28]=[s("Update")])),_:1,__:[28]})])]),_:1,__:[29]})]),_:1},8,["modelValue"]),t(T,{modelValue:y.value,"onUpdate:modelValue":e[14]||(e[14]=l=>y.value=l),width:"420"},{default:a(()=>[t(V,{class:"pa-4"},{default:a(()=>[e[31]||(e[31]=o("h3",{class:"text-h6 mb-4 font-weight-bold"},"Template Preview",-1)),t(F,{elevation:"1",class:"pa-4",style:{"border-radius":"12px",background:"#f4f7fb"}},{default:a(()=>{var l;return[o("div",R,[o("p",null,v((l=g.value)==null?void 0:l.body),1)])]}),_:1}),o("div",X,[t(i,{variant:"text",onClick:e[13]||(e[13]=l=>y.value=!1)},{default:a(()=>e[30]||(e[30]=[s("Close")])),_:1,__:[30]})])]),_:1,__:[31]})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{le as default};
