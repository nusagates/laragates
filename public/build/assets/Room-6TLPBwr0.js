import{r as u,x as v,m as y,d as s,o as a,i,h as g,F as b,k as h,E as k,t as d,l as x,z as I}from"./app-8P1lhKkM.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"wrapper"},C={key:0,class:"no-room"},N={key:0,class:"loading"},z=["src"],E=["href"],F={key:2},L={class:"time"},M={key:1,class:"no-msg"},R={__name:"Room",props:{roomId:Number},setup(m){const c=m,l=u(!1),n=u([]),r=u(null);async function _(){if(!c.roomId)return n.value=[];l.value=!0;try{const t=await x.get(`/chat/sessions/${c.roomId}/messages`);n.value=t.data,await I(),f()}catch(t){console.error(t)}finally{l.value=!1}}function f(){r.value&&(r.value.scrollTop=r.value.scrollHeight)}v(()=>c.roomId,()=>_()),y(()=>_());function p(t){return t.is_outgoing?"bubble-me":"bubble-you"}return(t,o)=>(a(),s("div",B,[m.roomId?(a(),s("div",{key:1,ref_key:"panel",ref:r,class:"messages"},[l.value?(a(),s("div",N,o[1]||(o[1]=[i("small",null,"Loading...",-1)]))):g("",!0),(a(!0),s(b,null,h(n.value,e=>(a(),s("div",{key:e.id,class:k(["bubble",p(e)])},[e.media_type&&e.media_type.startsWith("image")?(a(),s("img",{key:0,src:e.media_url,class:"img"},null,8,z)):e.media_type?(a(),s("a",{key:1,href:e.media_url,target:"_blank",class:"file"}," ðŸ“Ž "+d(e.message??"Attachment"),9,E)):(a(),s("span",F,d(e.message),1)),i("div",L,d(e.created_at),1)],2))),128)),!n.value.length&&!l.value?(a(),s("div",M,o[2]||(o[2]=[i("small",null,"No messages.",-1)]))):g("",!0)],512)):(a(),s("div",C,o[0]||(o[0]=[i("small",null,"Select a chat...",-1)])))]))}},V=w(R,[["__scopeId","data-v-ecb9e811"]]);export{V as default};
