import{a as Z,r as u,x as ee,m as D,q as z,b as n,k as M,o as x,w as t,e as o,h as f,d as te,F as oe,j as ae,u as p,D as le,S as N,i as a,t as g,L as $,M as ne,l as se,Q as re}from"./app-CsZa9FYx.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"logout-btn"},de={class:"content"},me=15*60*1e3,_e={__name:"AdminLayout",setup(ce){const _=Z(),L=_.props.auth.user.role,c=u(!0),C=u(_.url||"");ee(()=>_.url,s=>{C.value=s||""});const j=[{label:"Dashboard",icon:"mdi-view-dashboard",href:"/dashboard",roles:["admin","superadmin","supervisor","agent"]},{label:"Chat",icon:"mdi-whatsapp",href:"/chat",roles:["admin","superadmin","supervisor","agent"]},{label:"WhatsApp Menu",icon:"mdi-format-list-bulleted",href:"/menu",roles:["admin","superadmin"]},{label:"Tickets",icon:"mdi-ticket-confirmation-outline",href:"/tickets",roles:["admin","superadmin","supervisor","agent"]},{label:"Agents",icon:"mdi-account-group",href:"/agents",roles:["admin","superadmin"]},{label:"Templates",icon:"mdi-file-document-multiple",href:"/templates",roles:["admin","superadmin","supervisor"]},{label:"Contacts",icon:"mdi-account-box",href:"/contacts-ui",roles:["superadmin","agent","supervisor"]},{label:"Broadcast",icon:"mdi-send",href:"/broadcast",roles:["admin","superadmin","supervisor"]},{label:"Analytics",icon:"mdi-finance",href:"/analytics",roles:["admin","superadmin"]},{label:"System Logs",icon:"mdi-clipboard-text-clock-outline",href:"/system-logs",roles:["superadmin"]},{label:"Settings",icon:"mdi-cog",href:"/settings",roles:["superadmin"]}];let b=null;const F=()=>{se.post("/agent/heartbeat").catch(()=>{})};D(()=>{["agent","supervisor"].includes(L)&&(b=setInterval(F,3e4))}),z(()=>{b&&clearInterval(b)});const d=u(!1),m=u(!1),k=u(!1),V=u("");let w=null;const v=()=>{clearTimeout(w),w=setTimeout(()=>{m.value=!0},me)},h=["mousemove","keydown","mousedown","scroll","touchstart"];D(()=>{h.forEach(s=>window.addEventListener(s,v)),v()}),z(()=>{h.forEach(s=>window.removeEventListener(s,v)),clearTimeout(w)});const W=()=>{d.value=!0},I=()=>{d.value=!1,m.value=!1,re.post("/logout",{},{onFinish:()=>{V.value="You have been logged out",k.value=!0}})},P=()=>{m.value=!1,v()};return(s,e)=>{const r=n("v-icon"),y=n("v-list-item"),T=n("v-list"),Q=n("v-navigation-drawer"),i=n("v-btn"),Y=n("v-toolbar-title"),q=n("v-spacer"),H=n("v-divider"),R=n("v-theme-provider"),G=n("v-menu"),J=n("v-app-bar"),K=n("v-main"),A=n("v-card-title"),E=n("v-card-text"),S=n("v-card-actions"),B=n("v-card"),U=n("v-dialog"),O=n("v-snackbar"),X=n("v-app");return x(),M(X,{class:"admin-dark"},{default:t(()=>[o(Q,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=l=>c.value=l),width:"260",permanent:"",class:"sidebar"},{default:t(()=>[e[6]||(e[6]=f("div",{class:"logo"},"WABA",-1)),o(T,{density:"compact",nav:""},{default:t(()=>[(x(!0),te(oe,null,ae(j.filter(l=>l.roles.includes(p(L))),l=>(x(),M(y,{key:l.href,class:le(C.value.startsWith(l.href)?"active-menu":"")},{default:t(()=>[o(p(N),{href:l.href,class:"menu-link"},{default:t(()=>[o(r,{class:"mr-3"},{default:t(()=>[a(g(l.icon),1)]),_:2},1024),a(" "+g(l.label),1)]),_:2},1032,["href"])]),_:2},1032,["class"]))),128))]),_:1})]),_:1,__:[6]},8,["modelValue"]),o(K,{class:"main-area"},{default:t(()=>[o(J,{flat:"",height:"64",class:"topbar"},{default:t(()=>[o(i,{icon:"",onClick:e[1]||(e[1]=l=>c.value=!c.value)},{default:t(()=>[o(r,null,{default:t(()=>e[7]||(e[7]=[a("mdi-menu")])),_:1,__:[7]})]),_:1}),o(Y,{class:"title"},{default:t(()=>[$(s.$slots,"title",{},void 0,!0)]),_:3}),o(q),o(G,{location:"bottom end"},{activator:t(({props:l})=>[o(i,ne(l,{variant:"text",class:"user-btn"}),{default:t(()=>[o(r,{class:"mr-1"},{default:t(()=>e[8]||(e[8]=[a("mdi-account-circle")])),_:1,__:[8]}),a(" "+g(p(_).props.auth.user.name)+" ",1),o(r,{size:"18"},{default:t(()=>e[9]||(e[9]=[a("mdi-chevron-down")])),_:1,__:[9]})]),_:2},1040)]),default:t(()=>[o(R,{theme:"dark"},{default:t(()=>[o(T,{class:"user-dropdown"},{default:t(()=>[o(y,null,{default:t(()=>[o(p(N),{href:"/profile",class:"dropdown-link"},{default:t(()=>[o(r,{size:"18",class:"mr-2"},{default:t(()=>e[10]||(e[10]=[a("mdi-account")])),_:1,__:[10]}),e[11]||(e[11]=a(" Profile "))]),_:1,__:[11]})]),_:1}),o(H),o(y,{onClick:W},{default:t(()=>[f("span",ue,[o(r,{size:"18",class:"mr-2"},{default:t(()=>e[12]||(e[12]=[a("mdi-logout")])),_:1,__:[12]}),e[13]||(e[13]=a(" Logout "))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3}),f("div",de,[$(s.$slots,"default",{},void 0,!0)])]),_:3}),o(U,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),"max-width":"420"},{default:t(()=>[o(B,{class:"dialog-dark"},{default:t(()=>[o(A,null,{default:t(()=>e[14]||(e[14]=[a("Confirm Logout")])),_:1,__:[14]}),o(E,null,{default:t(()=>e[15]||(e[15]=[a(" Are you sure you want to log out? ")])),_:1,__:[15]}),o(S,{class:"justify-end"},{default:t(()=>[o(i,{variant:"text",onClick:e[2]||(e[2]=l=>d.value=!1)},{default:t(()=>e[16]||(e[16]=[a("Cancel")])),_:1,__:[16]}),o(i,{color:"error",onClick:I},{default:t(()=>e[17]||(e[17]=[a("Logout")])),_:1,__:[17]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(U,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=l=>m.value=l),"max-width":"420",persistent:""},{default:t(()=>[o(B,{class:"dialog-dark"},{default:t(()=>[o(A,null,{default:t(()=>e[18]||(e[18]=[a("Session Expiring")])),_:1,__:[18]}),o(E,null,{default:t(()=>e[19]||(e[19]=[a(" You have been inactive for a while."),f("br",null,null,-1),a(" Do you want to stay logged in? ")])),_:1,__:[19]}),o(S,{class:"justify-end"},{default:t(()=>[o(i,{variant:"text",color:"error",onClick:I},{default:t(()=>e[20]||(e[20]=[a("Logout")])),_:1,__:[20]}),o(i,{color:"primary",onClick:P},{default:t(()=>e[21]||(e[21]=[a("Stay")])),_:1,__:[21]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(O,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=l=>k.value=l),location:"top right",timeout:"3000",class:"toast-dark"},{default:t(()=>[o(r,{class:"mr-2",color:"green"},{default:t(()=>e[22]||(e[22]=[a("mdi-check-circle")])),_:1,__:[22]}),a(" "+g(V.value),1)]),_:1},8,["modelValue"])]),_:3})}}},pe=ie(_e,[["__scopeId","data-v-773f5caf"]]);export{pe as A};
